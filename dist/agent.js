(()=>{var u={windows:["Windows NT 10.0; Win64; x64","Windows NT 6.1; Win64; x64","Windows NT 6.2; Win64; x64","Windows NT 6.3; Win64; x64","Windows NT 10.0; Win64; ARM64","Windows NT 10.0; Win64; x64"],mac:["Macintosh; Intel Mac OS X 10_15_7","Macintosh; Intel Mac OS X 10_15_6","Macintosh; Intel Mac OS X 11_0_1","Macintosh; Intel Mac OS X 11_2_3","Macintosh; Intel Mac OS X 11_4","Macintosh; Intel Mac OS X 12_0","Macintosh; Intel Mac OS X 12_1","Macintosh; Intel Mac OS X 12_2"],linux:["X11; Linux x86_64","X11; Ubuntu; Linux x86_64","X11; Fedora; Linux x86_64","X11; Linux i686","X11; Debian; Linux x86_64","X11; CentOS; Linux x86_64","X11; OpenSUSE; Linux x86_64","X11; Linux; Android 9","X11; Linux; Android 10","X11; Linux; Android 11"]},c={edge:["91.0.864","92.0.902","93.0.961","94.0.992","95.0.1020","96.0.1054","97.0.1072","98.0.1108","99.0.1150"],ie:["11.0"],chrome:["91.0.4472","92.0.4515","93.0.4577","94.0.4606","95.0.4638","96.0.4664","97.0.4692","98.0.4758","99.0.4844"],firefox:["88.0","89.0","90.0","91.0","92.0","93.0","94.0","95.0","96.0","97.0"],safari:["13.1","14.0","14.1","15.0","15.1","15.2","15.3","15.4","15.5","15.6"],opera:["76.0.4017","77.0.4054","78.0.4093","79.0.4143","80.0.4170","81.0.4196","82.0.4227","83.0.4254","84.0.4316","85.0.4341"]};var t=null,r=0;chrome.runtime.onConnect.addListener(e=>{e.name==="popup"&&(t=e,t.postMessage(r),t.onDisconnect.addListener(()=>{t=null}))});function d(){t&&(r++,t.postMessage(r))}browser.webRequest.onBeforeSendHeaders.addListener(()=>{o&&d()},{urls:["<all_urls>"]});var o,s;browser.storage.local.get(null).then(e=>{o=e?.foxBrowser,s=e?.foxSystem||"windows",a()});browser.storage.local.onChanged.addListener(e=>{e.foxBrowser&&(o=e.foxBrowser.newValue),e.foxSystem&&(s=e.foxSystem.newValue),a()});function a(){let e={id:1,priority:1,action:{type:"modifyHeaders",requestHeaders:[{operation:"set",header:"user-agent",value:f()}]},condition:{resourceTypes:Object.values(browser.declarativeNetRequest.ResourceType)}};browser.declarativeNetRequest.updateDynamicRules({addRules:o?[e]:[],removeRuleIds:[1]})}setInterval(a,2e4);function f(){if(o)return x(o)}function x(e){let n=M(e),l=S(e);return`Mozilla/5.0 (${n}) AppleWebKit/537.36 (KHTML, like Gecko) ${l}`}function M(){let e=u[s];return e[Math.floor(Math.random()*e.length)]}function p(e){let n=c[e];return n[Math.floor(Math.random()*n.length)]}function S(e){let n=p(e),i=`${e==="ie"?"MSIE":e.charAt(0).toUpperCase()+e.slice(1)}/${n}`;return e==="chrome"||e==="edge"?i+=" Safari/537.36":e==="edge"?i+=` Edg/${n}`:e==="firefox"?i=`rv:${n}) Gecko/20100101 Firefox/${n}`:e==="opera"&&(i=`OPR/${n}`),i}})();
